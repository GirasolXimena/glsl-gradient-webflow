(()=>{function t(t){return t&&t.__esModule?t.default:t}
/* @license twgl.js 4.24.0 Copyright (c) 2015, Gregg Tavares All Rights Reserved.
Available via the MIT license.
see: http://github.com/greggman/twgl.js for details */let e=Float32Array;function n(t,n,i){const r=new e(3);return t&&(r[0]=t),n&&(r[1]=n),i&&(r[2]=i),r}function i(t,n,i){return(i=i||new e(3))[0]=t[0]+n[0],i[1]=t[1]+n[1],i[2]=t[2]+n[2],i}function r(t,n,i){return(i=i||new e(3))[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],i}function s(t,n,i){i=i||new e(3);const r=t[2]*n[0]-t[0]*n[2],s=t[0]*n[1]-t[1]*n[0];return i[0]=t[1]*n[2]-t[2]*n[1],i[1]=r,i[2]=s,i}function o(t,n){n=n||new e(3);const i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=Math.sqrt(i);return r>1e-5?(n[0]=t[0]/r,n[1]=t[1]/r,n[2]=t[2]/r):(n[0]=0,n[1]=0,n[2]=0),n}function a(t,n,i){return(i=i||new e(3))[0]=t[0]*n[0],i[1]=t[1]*n[1],i[2]=t[2]*n[2],i}let l,c,h,u=Float32Array;function d(t,e){return(e=e||new u(16))[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function f(t){return(t=t||new u(16))[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function g(t,e){e=e||new u(16);const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],d=t[9],f=t[10],g=t[11],p=t[12],m=t[13],v=t[14],b=t[15],y=f*b,A=v*g,w=l*b,x=v*c,_=l*g,E=f*c,z=r*b,C=v*s,S=r*g,$=f*s,F=r*c,P=l*s,T=h*m,k=p*d,I=o*m,M=p*a,L=o*d,B=h*a,U=n*m,R=p*i,D=n*d,O=h*i,V=n*a,H=o*i,Y=y*a+x*d+_*m-(A*a+w*d+E*m),G=A*i+z*d+$*m-(y*i+C*d+S*m),j=w*i+C*a+F*m-(x*i+z*a+P*m),N=E*i+S*a+P*d-(_*i+$*a+F*d),X=1/(n*Y+o*G+h*j+p*N);return e[0]=X*Y,e[1]=X*G,e[2]=X*j,e[3]=X*N,e[4]=X*(A*o+w*h+E*p-(y*o+x*h+_*p)),e[5]=X*(y*n+C*h+S*p-(A*n+z*h+$*p)),e[6]=X*(x*n+z*o+P*p-(w*n+C*o+F*p)),e[7]=X*(_*n+$*o+F*h-(E*n+S*o+P*h)),e[8]=X*(T*c+M*g+L*b-(k*c+I*g+B*b)),e[9]=X*(k*s+U*g+O*b-(T*s+R*g+D*b)),e[10]=X*(I*s+R*c+V*b-(M*s+U*c+H*b)),e[11]=X*(B*s+D*c+H*g-(L*s+O*c+V*g)),e[12]=X*(I*f+B*v+k*l-(L*v+T*l+M*f)),e[13]=X*(D*v+T*r+R*f-(U*f+O*v+k*r)),e[14]=X*(U*l+H*v+M*r-(V*v+I*r+R*l)),e[15]=X*(V*f+L*r+O*l-(D*l+H*f+B*r)),e}function p(t,e,i){i=i||n();const r=e[0],s=e[1],o=e[2],a=r*t[3]+s*t[7]+o*t[11]+t[15];return i[0]=(r*t[0]+s*t[4]+o*t[8]+t[12])/a,i[1]=(r*t[1]+s*t[5]+o*t[9]+t[13])/a,i[2]=(r*t[2]+s*t[6]+o*t[10]+t[14])/a,i}function m(t,e,i){i=i||n();const r=e[0],s=e[1],o=e[2];return i[0]=r*t[0]+s*t[4]+o*t[8],i[1]=r*t[1]+s*t[5]+o*t[9],i[2]=r*t[2]+s*t[6]+o*t[10],i}var v=Object.freeze({__proto__:null,axisRotate:function(t,e,n,i){i=i||new u(16);let r=e[0],s=e[1],o=e[2];const a=Math.sqrt(r*r+s*s+o*o);r/=a,s/=a,o/=a;const l=r*r,c=s*s,h=o*o,d=Math.cos(n),f=Math.sin(n),g=1-d,p=l+(1-l)*d,m=r*s*g+o*f,v=r*o*g-s*f,b=r*s*g-o*f,y=c+(1-c)*d,A=s*o*g+r*f,w=r*o*g+s*f,x=s*o*g-r*f,_=h+(1-h)*d,E=t[0],z=t[1],C=t[2],S=t[3],$=t[4],F=t[5],P=t[6],T=t[7],k=t[8],I=t[9],M=t[10],L=t[11];return i[0]=p*E+m*$+v*k,i[1]=p*z+m*F+v*I,i[2]=p*C+m*P+v*M,i[3]=p*S+m*T+v*L,i[4]=b*E+y*$+A*k,i[5]=b*z+y*F+A*I,i[6]=b*C+y*P+A*M,i[7]=b*S+y*T+A*L,i[8]=w*E+x*$+_*k,i[9]=w*z+x*F+_*I,i[10]=w*C+x*P+_*M,i[11]=w*S+x*T+_*L,t!==i&&(i[12]=t[12],i[13]=t[13],i[14]=t[14],i[15]=t[15]),i},axisRotation:function(t,e,n){n=n||new u(16);let i=t[0],r=t[1],s=t[2];const o=Math.sqrt(i*i+r*r+s*s);i/=o,r/=o,s/=o;const a=i*i,l=r*r,c=s*s,h=Math.cos(e),d=Math.sin(e),f=1-h;return n[0]=a+(1-a)*h,n[1]=i*r*f+s*d,n[2]=i*s*f-r*d,n[3]=0,n[4]=i*r*f-s*d,n[5]=l+(1-l)*h,n[6]=r*s*f+i*d,n[7]=0,n[8]=i*s*f+r*d,n[9]=r*s*f-i*d,n[10]=c+(1-c)*h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,n},copy:d,create:function(){return new u(16).fill(0)},frustum:function(t,e,n,i,r,s,o){const a=e-t,l=i-n,c=r-s;return(o=o||new u(16))[0]=2*r/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2*r/l,o[6]=0,o[7]=0,o[8]=(t+e)/a,o[9]=(i+n)/l,o[10]=s/c,o[11]=-1,o[12]=0,o[13]=0,o[14]=r*s/c,o[15]=0,o},getAxis:function(t,e,i){const r=4*e;return(i=i||n())[0]=t[r+0],i[1]=t[r+1],i[2]=t[r+2],i},getTranslation:function(t,e){return(e=e||n())[0]=t[12],e[1]=t[13],e[2]=t[14],e},identity:f,inverse:g,lookAt:function(t,e,i,a){return a=a||new u(16),l=l||n(),c=c||n(),h=h||n(),o(r(t,e,h),h),o(s(i,h,l),l),o(s(h,l,c),c),a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=0,a[4]=c[0],a[5]=c[1],a[6]=c[2],a[7]=0,a[8]=h[0],a[9]=h[1],a[10]=h[2],a[11]=0,a[12]=t[0],a[13]=t[1],a[14]=t[2],a[15]=1,a},multiply:function(t,e,n){n=n||new u(16);const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],d=t[8],f=t[9],g=t[10],p=t[11],m=t[12],v=t[13],b=t[14],y=t[15],A=e[0],w=e[1],x=e[2],_=e[3],E=e[4],z=e[5],C=e[6],S=e[7],$=e[8],F=e[9],P=e[10],T=e[11],k=e[12],I=e[13],M=e[14],L=e[15];return n[0]=i*A+a*w+d*x+m*_,n[1]=r*A+l*w+f*x+v*_,n[2]=s*A+c*w+g*x+b*_,n[3]=o*A+h*w+p*x+y*_,n[4]=i*E+a*z+d*C+m*S,n[5]=r*E+l*z+f*C+v*S,n[6]=s*E+c*z+g*C+b*S,n[7]=o*E+h*z+p*C+y*S,n[8]=i*$+a*F+d*P+m*T,n[9]=r*$+l*F+f*P+v*T,n[10]=s*$+c*F+g*P+b*T,n[11]=o*$+h*F+p*P+y*T,n[12]=i*k+a*I+d*M+m*L,n[13]=r*k+l*I+f*M+v*L,n[14]=s*k+c*I+g*M+b*L,n[15]=o*k+h*I+p*M+y*L,n},negate:function(t,e){return(e=e||new u(16))[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=-t[7],e[8]=-t[8],e[9]=-t[9],e[10]=-t[10],e[11]=-t[11],e[12]=-t[12],e[13]=-t[13],e[14]=-t[14],e[15]=-t[15],e},ortho:function(t,e,n,i,r,s,o){return(o=o||new u(16))[0]=2/(e-t),o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=2/(i-n),o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2/(r-s),o[11]=0,o[12]=(e+t)/(t-e),o[13]=(i+n)/(n-i),o[14]=(s+r)/(r-s),o[15]=1,o},perspective:function(t,e,n,i,r){r=r||new u(16);const s=Math.tan(.5*Math.PI-.5*t),o=1/(n-i);return r[0]=s/e,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=s,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=(n+i)*o,r[11]=-1,r[12]=0,r[13]=0,r[14]=n*i*o*2,r[15]=0,r},rotateX:function(t,e,n){n=n||new u(16);const i=t[4],r=t[5],s=t[6],o=t[7],a=t[8],l=t[9],c=t[10],h=t[11],d=Math.cos(e),f=Math.sin(e);return n[4]=d*i+f*a,n[5]=d*r+f*l,n[6]=d*s+f*c,n[7]=d*o+f*h,n[8]=d*a-f*i,n[9]=d*l-f*r,n[10]=d*c-f*s,n[11]=d*h-f*o,t!==n&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateY:function(t,e,n){n=n||new u(16);const i=t[0],r=t[1],s=t[2],o=t[3],a=t[8],l=t[9],c=t[10],h=t[11],d=Math.cos(e),f=Math.sin(e);return n[0]=d*i-f*a,n[1]=d*r-f*l,n[2]=d*s-f*c,n[3]=d*o-f*h,n[8]=d*a+f*i,n[9]=d*l+f*r,n[10]=d*c+f*s,n[11]=d*h+f*o,t!==n&&(n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotateZ:function(t,e,n){n=n||new u(16);const i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],h=t[7],d=Math.cos(e),f=Math.sin(e);return n[0]=d*i+f*a,n[1]=d*r+f*l,n[2]=d*s+f*c,n[3]=d*o+f*h,n[4]=d*a-f*i,n[5]=d*l-f*r,n[6]=d*c-f*s,n[7]=d*h-f*o,t!==n&&(n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},rotationX:function(t,e){e=e||new u(16);const n=Math.cos(t),i=Math.sin(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationY:function(t,e){e=e||new u(16);const n=Math.cos(t),i=Math.sin(t);return e[0]=n,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},rotationZ:function(t,e){e=e||new u(16);const n=Math.cos(t),i=Math.sin(t);return e[0]=n,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},scale:function(t,e,n){n=n||new u(16);const i=e[0],r=e[1],s=e[2];return n[0]=i*t[0],n[1]=i*t[1],n[2]=i*t[2],n[3]=i*t[3],n[4]=r*t[4],n[5]=r*t[5],n[6]=r*t[6],n[7]=r*t[7],n[8]=s*t[8],n[9]=s*t[9],n[10]=s*t[10],n[11]=s*t[11],t!==n&&(n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15]),n},scaling:function(t,e){return(e=e||new u(16))[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},setAxis:function(t,e,n,i){i!==t&&(i=d(t,i));const r=4*n;return i[r+0]=e[0],i[r+1]=e[1],i[r+2]=e[2],i},setDefaultType:function(t){const e=u;return u=t,e},setTranslation:function(t,e,n){return t!==(n=n||f())&&(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11]),n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n},transformDirection:m,transformNormal:function(t,e,i){i=i||n();const r=g(t),s=e[0],o=e[1],a=e[2];return i[0]=s*r[0]+o*r[1]+a*r[2],i[1]=s*r[4]+o*r[5]+a*r[6],i[2]=s*r[8]+o*r[9]+a*r[10],i},transformPoint:p,translate:function(t,e,n){n=n||new u(16);const i=e[0],r=e[1],s=e[2],o=t[0],a=t[1],l=t[2],c=t[3],h=t[4],d=t[5],f=t[6],g=t[7],p=t[8],m=t[9],v=t[10],b=t[11],y=t[12],A=t[13],w=t[14],x=t[15];return t!==n&&(n[0]=o,n[1]=a,n[2]=l,n[3]=c,n[4]=h,n[5]=d,n[6]=f,n[7]=g,n[8]=p,n[9]=m,n[10]=v,n[11]=b),n[12]=o*i+h*r+p*s+y,n[13]=a*i+d*r+m*s+A,n[14]=l*i+f*r+v*s+w,n[15]=c*i+g*r+b*s+x,n},translation:function(t,e){return(e=e||new u(16))[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},transpose:function(t,e){if((e=e||new u(16))===t){let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,e}const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],h=t[8],d=t[9],f=t[10],g=t[11],p=t[12],m=t[13],v=t[14],b=t[15];return e[0]=n,e[1]=o,e[2]=h,e[3]=p,e[4]=i,e[5]=a,e[6]=d,e[7]=m,e[8]=r,e[9]=l,e[10]=f,e[11]=v,e[12]=s,e[13]=c,e[14]=g,e[15]=b,e}});const b=5120,y=5121,A=5122,w=5123,x=5124,_=5125,E=5126,z={};{const t=z;t[5120]=Int8Array,t[5121]=Uint8Array,t[5122]=Int16Array,t[5123]=Uint16Array,t[5124]=Int32Array,t[5125]=Uint32Array,t[5126]=Float32Array,t[32819]=Uint16Array,t[32820]=Uint16Array,t[33635]=Uint16Array,t[5131]=Uint16Array,t[33640]=Uint32Array,t[35899]=Uint32Array,t[35902]=Uint32Array,t[36269]=Uint32Array,t[34042]=Uint32Array}function C(t){if(t instanceof Int8Array)return b;if(t instanceof Uint8Array)return y;if(t instanceof Uint8ClampedArray)return y;if(t instanceof Int16Array)return A;if(t instanceof Uint16Array)return w;if(t instanceof Int32Array)return x;if(t instanceof Uint32Array)return _;if(t instanceof Float32Array)return E;throw new Error("unsupported typed array type")}function S(t){if(t===Int8Array)return b;if(t===Uint8Array)return y;if(t===Uint8ClampedArray)return y;if(t===Int16Array)return A;if(t===Uint16Array)return w;if(t===Int32Array)return x;if(t===Uint32Array)return _;if(t===Float32Array)return E;throw new Error("unsupported typed array type")}const $="undefined"!=typeof SharedArrayBuffer?function(t){return t&&t.buffer&&(t.buffer instanceof ArrayBuffer||t.buffer instanceof SharedArrayBuffer)}:function(t){return t&&t.buffer&&t.buffer instanceof ArrayBuffer};function F(...t){console.error(...t)}function P(t,e){return"undefined"!=typeof WebGLTexture&&e instanceof WebGLTexture}const T=34962,k={attribPrefix:""};function I(t,e,n,i,r){t.bindBuffer(e,n),t.bufferData(e,i,r||35044)}function M(t,e,n,i){if(r=e,"undefined"!=typeof WebGLBuffer&&r instanceof WebGLBuffer)return e;var r;n=n||T;const s=t.createBuffer();return I(t,n,s,e,i),s}function L(t){return"indices"===t}function B(t){return t.length?t:t.data}const U=/coord|texture/i,R=/color|colour/i;function D(t,e){let n;if(n=U.test(t)?2:R.test(t)?4:3,e%n>0)throw new Error(`Can not guess numComponents for attribute '${t}'. Tried ${n} but ${e} values is not evenly divisible by ${n}. You should specify it.`);return n}function O(t,e){return t.numComponents||t.size||D(e,B(t).length)}function V(t,e){if($(t))return t;if($(t.data))return t.data;Array.isArray(t)&&(t={data:t});let n=t.type;return n||(n=L(e)?Uint16Array:Float32Array),new n(t.data)}function H(t,e){const n={};return Object.keys(e).forEach((function(i){if(!L(i)){const s=e[i],o=s.attrib||s.name||s.attribName||k.attribPrefix+i;if(s.value){if(!Array.isArray(s.value)&&!$(s.value))throw new Error("array.value is not array or typedarray");n[o]={value:s.value}}else{let e,a,l,c;if(s.buffer&&s.buffer instanceof WebGLBuffer)e=s.buffer,c=s.numComponents||s.size,a=s.type,l=s.normalize;else if("number"==typeof s||"number"==typeof s.data){const n=s.data||s,o=s.type||Float32Array,h=n*o.BYTES_PER_ELEMENT;a=S(o),l=void 0!==s.normalize?s.normalize:(r=o)===Int8Array||r===Uint8Array,c=s.numComponents||s.size||D(i,n),e=t.createBuffer(),t.bindBuffer(T,e),t.bufferData(T,h,s.drawType||35044)}else{const n=V(s,i);e=M(t,n,void 0,s.drawType),a=C(n),l=void 0!==s.normalize?s.normalize:function(t){return t instanceof Int8Array||t instanceof Uint8Array}(n),c=O(s,i)}n[o]={buffer:e,numComponents:c,type:a,normalize:l,stride:s.stride||0,offset:s.offset||0,divisor:void 0===s.divisor?void 0:s.divisor,drawType:s.drawType}}}var r})),t.bindBuffer(T,null),n}const Y=["position","positions","a_position"];function G(t,e,n){const i=H(t,e),r=Object.assign({},n||{});r.attribs=Object.assign({},n?n.attribs:{},i);const s=e.indices;if(s){const e=V(s,"indices");r.indices=M(t,e,34963),r.numElements=e.length,r.elementType=C(e)}else r.numElements||(r.numElements=function(t,e){let n,i;for(i=0;i<Y.length&&(n=Y[i],!(n in e))&&(n=k.attribPrefix+n,!(n in e));++i);i===Y.length&&(n=Object.keys(e)[0]);const r=e[n];if(!r.buffer)return 1;t.bindBuffer(T,r.buffer);const s=t.getBufferParameter(T,34660);var o;t.bindBuffer(T,null);const a=s/(5120===(o=r.type)||5121===o?1:5122===o||5123===o?2:5124===o||5125===o||5126===o?4:0),l=r.numComponents||r.size,c=a/l;if(c%1!=0)throw new Error(`numComponents ${l} not correct for length ${length}`);return c}(t,r.attribs));return r}function j(t,e,n){const i="indices"===n?34963:T;return M(t,V(e,n),i)}function N(t,e){const n={};return Object.keys(e).forEach((function(i){n[i]=j(t,e[i],i)})),e.indices?(n.numElements=e.indices.length,n.elementType=C(V(e.indices))):n.numElements=function(t){let e,n;for(n=0;n<Y.length&&(e=Y[n],!(e in t));++n);n===Y.length&&(e=Object.keys(t)[0]);const i=t[e],r=B(i).length;if(void 0===r)return 1;const s=O(i,e),o=r/s;if(r%s>0)throw new Error(`numComponents ${s} not correct for length ${r}`);return o}(e),n}function X(t,e){let n=0;return t.push=function(){for(let e=0;e<arguments.length;++e){const i=arguments[e];if(i instanceof Array||$(i))for(let e=0;e<i.length;++e)t[n++]=i[e];else t[n++]=i}},t.reset=function(t){n=t||0},t.numComponents=e,Object.defineProperty(t,"numElements",{get:function(){return this.length/this.numComponents|0}}),t}function W(t,e,n){return X(new(n||Float32Array)(t*e),t)}function Q(t,e,n){const i=t.length,r=new Float32Array(3);for(let s=0;s<i;s+=3)n(e,[t[s],t[s+1],t[s+2]],r),t[s]=r[0],t[s+1]=r[1],t[s+2]=r[2]}function q(t,e,i){i=i||n();const r=e[0],s=e[1],o=e[2];return i[0]=r*t[0]+s*t[1]+o*t[2],i[1]=r*t[4]+s*t[5]+o*t[6],i[2]=r*t[8]+s*t[9]+o*t[10],i}function J(t,e){return Q(t,e,m),t}function K(t,e){return Q(t,g(e),q),t}function Z(t,e){return Q(t,e,p),t}function tt(t,e){return Object.keys(t).forEach((function(n){const i=t[n];n.indexOf("pos")>=0?Z(i,e):n.indexOf("tan")>=0||n.indexOf("binorm")>=0?J(i,e):n.indexOf("norm")>=0&&K(i,e)})),t}function et(t,e,n){return t=t||2,{position:{numComponents:2,data:[(e=e||0)+-1*(t*=.5),(n=n||0)+-1*t,e+1*t,n+-1*t,e+-1*t,n+1*t,e+1*t,n+1*t]},normal:[0,0,1,0,0,1,0,0,1,0,0,1],texcoord:[0,0,1,0,0,1,1,1],indices:[0,1,2,2,1,3]}}function nt(t,e,n,i,r){t=t||1,e=e||1,n=n||1,i=i||1,r=r||f();const s=(n+1)*(i+1),o=W(3,s),a=W(3,s),l=W(2,s);for(let r=0;r<=i;r++)for(let s=0;s<=n;s++){const c=s/n,h=r/i;o.push(t*c-.5*t,0,e*h-.5*e),a.push(0,1,0),l.push(c,h)}const c=n+1,h=W(3,n*i*2,Uint16Array);for(let t=0;t<i;t++)for(let e=0;e<n;e++)h.push((t+0)*c+e,(t+1)*c+e,(t+0)*c+e+1),h.push((t+1)*c+e,(t+1)*c+e+1,(t+0)*c+e+1);return tt({position:o,normal:a,texcoord:l,indices:h},r)}function it(t,e,n,i,r,s,o){if(e<=0||n<=0)throw new Error("subdivisionAxis and subdivisionHeight must be > 0");i=i||0,s=s||0;const a=(r=r||Math.PI)-i,l=(o=o||2*Math.PI)-s,c=(e+1)*(n+1),h=W(3,c),u=W(3,c),d=W(2,c);for(let r=0;r<=n;r++)for(let o=0;o<=e;o++){const c=o/e,f=r/n,g=l*c+s,p=a*f+i,m=Math.sin(g),v=Math.cos(g),b=Math.sin(p),y=v*b,A=Math.cos(p),w=m*b;h.push(t*y,t*A,t*w),u.push(y,A,w),d.push(1-c,f)}const f=e+1,g=W(3,e*n*2,Uint16Array);for(let t=0;t<e;t++)for(let e=0;e<n;e++)g.push((e+0)*f+t,(e+0)*f+t+1,(e+1)*f+t),g.push((e+1)*f+t,(e+0)*f+t+1,(e+1)*f+t+1);return{position:h,normal:u,texcoord:d,indices:g}}const rt=[[3,7,5,1],[6,2,0,4],[6,7,3,2],[0,1,5,4],[7,6,4,5],[2,3,1,0]];function st(t){const e=(t=t||1)/2,n=[[-e,-e,-e],[+e,-e,-e],[-e,+e,-e],[+e,+e,-e],[-e,-e,+e],[+e,-e,+e],[-e,+e,+e],[+e,+e,+e]],i=[[1,0,0],[-1,0,0],[0,1,0],[0,-1,0],[0,0,1],[0,0,-1]],r=[[1,0],[0,0],[0,1],[1,1]],s=W(3,24),o=W(3,24),a=W(2,24),l=W(3,12,Uint16Array);for(let t=0;t<6;++t){const e=rt[t];for(let l=0;l<4;++l){const c=n[e[l]],h=i[t],u=r[l];s.push(c),o.push(h),a.push(u)}const c=4*t;l.push(c+0,c+1,c+2),l.push(c+0,c+2,c+3)}return{position:s,normal:o,texcoord:a,indices:l}}function ot(t,e,n,i,r,s,o){if(i<3)throw new Error("radialSubdivisions must be 3 or greater");if(r<1)throw new Error("verticalSubdivisions must be 1 or greater");const a=void 0===s||s,l=void 0===o||o,c=(a?2:0)+(l?2:0),h=(i+1)*(r+1+c),u=W(3,h),d=W(3,h),f=W(2,h),g=W(3,i*(r+c/2)*2,Uint16Array),p=i+1,m=Math.atan2(t-e,n),v=Math.cos(m),b=Math.sin(m),y=r+(l?2:0);for(let s=a?-2:0;s<=y;++s){let o,a=s/r,l=n*a;s<0?(l=0,a=1,o=t):s>r?(l=n,a=1,o=e):o=t+s/r*(e-t),-2!==s&&s!==r+2||(o=0,a=0),l-=n/2;for(let t=0;t<p;++t){const e=Math.sin(t*Math.PI*2/i),n=Math.cos(t*Math.PI*2/i);u.push(e*o,l,n*o),s<0?d.push(0,-1,0):s>r?d.push(0,1,0):0===o?d.push(0,0,0):d.push(e*v,b,n*v),f.push(t/i,1-a)}}for(let t=0;t<r+c;++t)if(!(1===t&&a||t===r+c-2&&l))for(let e=0;e<i;++e)g.push(p*(t+0)+0+e,p*(t+0)+1+e,p*(t+1)+1+e),g.push(p*(t+0)+0+e,p*(t+1)+1+e,p*(t+1)+0+e);return{position:u,normal:d,texcoord:f,indices:g}}function at(t,e){e=e||[];const n=[];for(let i=0;i<t.length;i+=4){const r=t[i],s=t.slice(i+1,i+4);s.push.apply(s,e);for(let t=0;t<r;++t)n.push.apply(n,s)}return n}function lt(){const t=[0,0,0,0,150,0,30,0,0,0,150,0,30,150,0,30,0,0,30,0,0,30,30,0,100,0,0,30,30,0,100,30,0,100,0,0,30,60,0,30,90,0,67,60,0,30,90,0,67,90,0,67,60,0,0,0,30,30,0,30,0,150,30,0,150,30,30,0,30,30,150,30,30,0,30,100,0,30,30,30,30,30,30,30,100,0,30,100,30,30,30,60,30,67,60,30,30,90,30,30,90,30,67,60,30,67,90,30,0,0,0,100,0,0,100,0,30,0,0,0,100,0,30,0,0,30,100,0,0,100,30,0,100,30,30,100,0,0,100,30,30,100,0,30,30,30,0,30,30,30,100,30,30,30,30,0,100,30,30,100,30,0,30,30,0,30,60,30,30,30,30,30,30,0,30,60,0,30,60,30,30,60,0,67,60,30,30,60,30,30,60,0,67,60,0,67,60,30,67,60,0,67,90,30,67,60,30,67,60,0,67,90,0,67,90,30,30,90,0,30,90,30,67,90,30,30,90,0,67,90,30,67,90,0,30,90,0,30,150,30,30,90,30,30,90,0,30,150,0,30,150,30,0,150,0,0,150,30,30,150,30,0,150,0,30,150,30,30,150,0,0,0,0,0,0,30,0,150,30,0,0,0,0,150,30,0,150,0],e=at([18,0,0,1,18,0,0,-1,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,1,0,6,1,0,0,6,0,-1,0,6,1,0,0,6,0,-1,0,6,-1,0,0]),n=at([18,200,70,120,18,80,70,200,6,70,200,210,6,200,200,70,6,210,100,70,6,210,160,70,6,70,180,210,6,100,70,210,6,76,210,100,6,140,210,80,6,90,130,110,6,160,160,220],[255]),i=t.length/3,r={position:W(3,i),texcoord:W(2,i),normal:W(3,i),color:W(4,i,Uint8Array),indices:W(3,i/3,Uint16Array)};r.position.push(t),r.texcoord.push([.22,.19,.22,.79,.34,.19,.22,.79,.34,.79,.34,.19,.34,.19,.34,.31,.62,.19,.34,.31,.62,.31,.62,.19,.34,.43,.34,.55,.49,.43,.34,.55,.49,.55,.49,.43,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,0,1,0,1,1,0,1,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,1,0]),r.normal.push(e),r.color.push(n);for(let t=0;t<i;++t)r.indices.push(t);return r}function ct(t,e,n,r,s,o,l){if(s<=0)throw new Error("subdivisionDown must be > 0");const c=(l=l||1)-(o=o||0),h=2*(s+1)*4,u=W(3,h),d=W(3,h),f=W(2,h);function g(t,e,n){return t+(e-t)*n}function p(e,n,l,h,p,m){for(let v=0;v<=s;v++){const b=n/1,y=v/s,A=2*(b-.5),w=(o+y*c)*Math.PI,x=Math.sin(w),_=Math.cos(w),E=g(t,e,x),z=A*r,C=_*t,S=x*E;u.push(z,C,S);const $=i(a([0,x,_],l),h);d.push($),f.push(b*p+m,y)}}for(let t=0;t<2;t++){const i=2*(t/1-.5);p(e,t,[1,1,1],[0,0,0],1,0),p(e,t,[0,0,0],[i,0,0],0,0),p(n,t,[1,1,1],[0,0,0],1,0),p(n,t,[0,0,0],[i,0,0],0,1)}const m=W(3,2*s*4,Uint16Array);function v(t,e){for(let n=0;n<s;++n)m.push(t+n+0,t+n+1,e+n+0),m.push(t+n+1,e+n+1,e+n+0)}const b=s+1;return v(0*b,4*b),v(5*b,7*b),v(6*b,2*b),v(3*b,1*b),{position:u,normal:d,texcoord:f,indices:m}}function ht(t,e,n,i,r,s){return ot(t,t,e,n,i,r,s)}function ut(t,e,n,i,r,s){if(n<3)throw new Error("radialSubdivisions must be 3 or greater");if(i<3)throw new Error("verticalSubdivisions must be 3 or greater");r=r||0;const o=(s=s||2*Math.PI)-r,a=n+1,l=i+1,c=a*l,h=W(3,c),u=W(3,c),d=W(2,c),f=W(3,n*i*2,Uint16Array);for(let s=0;s<l;++s){const l=s/i,c=l*Math.PI*2,f=Math.sin(c),g=t+f*e,p=Math.cos(c),m=p*e;for(let t=0;t<a;++t){const e=t/n,i=r+e*o,s=Math.sin(i),a=Math.cos(i),c=s*g,v=a*g,b=s*f,y=a*f;h.push(c,m,v),u.push(b,p,y),d.push(e,1-l)}}for(let t=0;t<i;++t)for(let e=0;e<n;++e){const n=1+e,i=1+t;f.push(a*t+e,a*i+e,a*t+n),f.push(a*i+e,a*i+n,a*t+n)}return{position:h,normal:u,texcoord:d,indices:f}}function dt(t,e,n,i,r){if(e<3)throw new Error("divisions must be at least 3");r=r||1,i=i||0;const s=(e+1)*((n=n||1)+1),o=W(3,s),a=W(3,s),l=W(2,s),c=W(3,n*e*2,Uint16Array);let h=0;const u=t-i,d=e+1;for(let t=0;t<=n;++t){const s=i+u*Math.pow(t/n,r);for(let i=0;i<=e;++i){const r=2*Math.PI*i/e,u=s*Math.cos(r),f=s*Math.sin(r);if(o.push(u,0,f),a.push(0,1,0),l.push(1-i/e,t/n),t>0&&i!==e){const t=h+(i+1),e=h+i,n=h+i-d,r=h+(i+1)-d;c.push(t,e,n),c.push(t,n,r)}}h+=e+1}return{position:o,normal:a,texcoord:l,indices:c}}function ft(t){return function(e){const n=t.apply(this,Array.prototype.slice.call(arguments,1));return N(e,n)}}function gt(t){return function(e){const n=t.apply(null,Array.prototype.slice.call(arguments,1));return G(e,n)}}gt(lt),ft(lt),gt(st),ft(st),gt(nt),ft(nt),gt(it),ft(it),gt(ot),ft(ot),gt(et),ft(et),gt(ct),ft(ct),gt(ht),ft(ht),gt(ut),ft(ut),gt(dt),ft(dt);function pt(t){return!!t.texStorage2D}const mt=function(){const t={},e={};return function(n,i){return function(n){const i=n.constructor.name;if(!t[i]){for(const t in n)if("number"==typeof n[t]){const i=e[n[t]];e[n[t]]=i?`${i} | ${t}`:t}t[i]=!0}}(n),e[i]||("number"==typeof i?`0x${i.toString(16)}`:i)}}();new Uint8Array([128,192,255,255]),function(){let t}();const vt={};{const t=vt;t[6406]={numColorComponents:1},t[6409]={numColorComponents:1},t[6410]={numColorComponents:2},t[6407]={numColorComponents:3},t[6408]={numColorComponents:4},t[6403]={numColorComponents:1},t[36244]={numColorComponents:1},t[33319]={numColorComponents:2},t[33320]={numColorComponents:2},t[6407]={numColorComponents:3},t[36248]={numColorComponents:3},t[6408]={numColorComponents:4},t[36249]={numColorComponents:4},t[6402]={numColorComponents:1},t[34041]={numColorComponents:2}}const bt=F;function yt(t){return"undefined"!=typeof document&&document.getElementById?document.getElementById(t):null}const At=33984,wt=34962,xt=5126,_t=5124,Et=5125,zt=3553,Ct=34067,St=32879,$t=35866,Ft={};function Pt(t,e){return Ft[e].bindPoint}function Tt(t,e){return function(n){t.uniform1i(e,n)}}function kt(t,e){return function(n){t.uniform1iv(e,n)}}function It(t,e){return function(n){t.uniform2iv(e,n)}}function Mt(t,e){return function(n){t.uniform3iv(e,n)}}function Lt(t,e){return function(n){t.uniform4iv(e,n)}}function Bt(t,e,n,i){const r=Pt(0,e);return pt(t)?function(e){let s,o;P(0,e)?(s=e,o=null):(s=e.texture,o=e.sampler),t.uniform1i(i,n),t.activeTexture(At+n),t.bindTexture(r,s),t.bindSampler(n,o)}:function(e){t.uniform1i(i,n),t.activeTexture(At+n),t.bindTexture(r,e)}}function Ut(t,e,n,i,r){const s=Pt(0,e),o=new Int32Array(r);for(let t=0;t<r;++t)o[t]=n+t;return pt(t)?function(e){t.uniform1iv(i,o),e.forEach((function(e,i){let r,a;t.activeTexture(At+o[i]),P(0,e)?(r=e,a=null):(r=e.texture,a=e.sampler),t.bindSampler(n,a),t.bindTexture(s,r)}))}:function(e){t.uniform1iv(i,o),e.forEach((function(e,n){t.activeTexture(At+o[n]),t.bindTexture(s,e)}))}}function Rt(t,e){return function(n){if(n.value)switch(t.disableVertexAttribArray(e),n.value.length){case 4:t.vertexAttrib4fv(e,n.value);break;case 3:t.vertexAttrib3fv(e,n.value);break;case 2:t.vertexAttrib2fv(e,n.value);break;case 1:t.vertexAttrib1fv(e,n.value);break;default:throw new Error("the length of a float constant value must be between 1 and 4!")}else t.bindBuffer(wt,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,n.numComponents||n.size,n.type||xt,n.normalize||!1,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Dt(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an integer constant value must be 4!");t.vertexAttrib4iv(e,n.value)}else t.bindBuffer(wt,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||_t,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Ot(t,e){return function(n){if(n.value){if(t.disableVertexAttribArray(e),4!==n.value.length)throw new Error("The length of an unsigned integer constant value must be 4!");t.vertexAttrib4uiv(e,n.value)}else t.bindBuffer(wt,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,n.numComponents||n.size,n.type||Et,n.stride||0,n.offset||0),void 0!==n.divisor&&t.vertexAttribDivisor(e,n.divisor)}}function Vt(t,e,n){const i=n.size,r=n.count;return function(n){t.bindBuffer(wt,n.buffer);const s=n.size||n.numComponents||i,o=s/r,a=n.type||xt,l=Ft[a].size*s,c=n.normalize||!1,h=n.offset||0,u=l/r;for(let i=0;i<r;++i)t.enableVertexAttribArray(e+i),t.vertexAttribPointer(e+i,o,a,c,l,h+u*i),void 0!==n.divisor&&t.vertexAttribDivisor(e+i,n.divisor)}}Ft[5126]={Type:Float32Array,size:4,setter:function(t,e){return function(n){t.uniform1f(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1fv(e,n)}}},Ft[35664]={Type:Float32Array,size:8,setter:function(t,e){return function(n){t.uniform2fv(e,n)}},cols:2},Ft[35665]={Type:Float32Array,size:12,setter:function(t,e){return function(n){t.uniform3fv(e,n)}},cols:3},Ft[35666]={Type:Float32Array,size:16,setter:function(t,e){return function(n){t.uniform4fv(e,n)}},cols:4},Ft[5124]={Type:Int32Array,size:4,setter:Tt,arraySetter:kt},Ft[35667]={Type:Int32Array,size:8,setter:It,cols:2},Ft[35668]={Type:Int32Array,size:12,setter:Mt,cols:3},Ft[35669]={Type:Int32Array,size:16,setter:Lt,cols:4},Ft[5125]={Type:Uint32Array,size:4,setter:function(t,e){return function(n){t.uniform1ui(e,n)}},arraySetter:function(t,e){return function(n){t.uniform1uiv(e,n)}}},Ft[36294]={Type:Uint32Array,size:8,setter:function(t,e){return function(n){t.uniform2uiv(e,n)}},cols:2},Ft[36295]={Type:Uint32Array,size:12,setter:function(t,e){return function(n){t.uniform3uiv(e,n)}},cols:3},Ft[36296]={Type:Uint32Array,size:16,setter:function(t,e){return function(n){t.uniform4uiv(e,n)}},cols:4},Ft[35670]={Type:Uint32Array,size:4,setter:Tt,arraySetter:kt},Ft[35671]={Type:Uint32Array,size:8,setter:It,cols:2},Ft[35672]={Type:Uint32Array,size:12,setter:Mt,cols:3},Ft[35673]={Type:Uint32Array,size:16,setter:Lt,cols:4},Ft[35674]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2fv(e,!1,n)}},rows:2,cols:2},Ft[35675]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3fv(e,!1,n)}},rows:3,cols:3},Ft[35676]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4fv(e,!1,n)}},rows:4,cols:4},Ft[35685]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x3fv(e,!1,n)}},rows:2,cols:3},Ft[35686]={Type:Float32Array,size:32,setter:function(t,e){return function(n){t.uniformMatrix2x4fv(e,!1,n)}},rows:2,cols:4},Ft[35687]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x2fv(e,!1,n)}},rows:3,cols:2},Ft[35688]={Type:Float32Array,size:48,setter:function(t,e){return function(n){t.uniformMatrix3x4fv(e,!1,n)}},rows:3,cols:4},Ft[35689]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4x2fv(e,!1,n)}},rows:4,cols:2},Ft[35690]={Type:Float32Array,size:64,setter:function(t,e){return function(n){t.uniformMatrix4x3fv(e,!1,n)}},rows:4,cols:3},Ft[35678]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:zt},Ft[35680]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:Ct},Ft[35679]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:St},Ft[35682]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:zt},Ft[36289]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:$t},Ft[36292]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:$t},Ft[36293]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:Ct},Ft[36298]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:zt},Ft[36299]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:St},Ft[36300]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:Ct},Ft[36303]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:$t},Ft[36306]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:zt},Ft[36307]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:St},Ft[36308]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:Ct},Ft[36311]={Type:null,size:0,setter:Bt,arraySetter:Ut,bindPoint:$t};const Ht={};Ht[5126]={size:4,setter:Rt},Ht[35664]={size:8,setter:Rt},Ht[35665]={size:12,setter:Rt},Ht[35666]={size:16,setter:Rt},Ht[5124]={size:4,setter:Dt},Ht[35667]={size:8,setter:Dt},Ht[35668]={size:12,setter:Dt},Ht[35669]={size:16,setter:Dt},Ht[5125]={size:4,setter:Ot},Ht[36294]={size:8,setter:Ot},Ht[36295]={size:12,setter:Ot},Ht[36296]={size:16,setter:Ot},Ht[35670]={size:4,setter:Dt},Ht[35671]={size:8,setter:Dt},Ht[35672]={size:12,setter:Dt},Ht[35673]={size:16,setter:Dt},Ht[35674]={size:4,setter:Vt,count:2},Ht[35675]={size:9,setter:Vt,count:3},Ht[35676]={size:16,setter:Vt,count:4};const Yt=/ERROR:\s*\d+:(\d+)/gi;const Gt=/^[ \t]*\n/;function jt(t){let e=0;return Gt.test(t)&&(e=1,t=t.replace(Gt,"")),{lineOffset:e,shaderSource:t}}function Nt(t,e){return t.errorCallback(e),t.callback&&setTimeout((()=>{t.callback(`${e}\n${t.errors.join("\n")}`)})),null}function Xt(t,e,n,i){const r=t.createShader(n);return t.shaderSource(r,jt(e).shaderSource),t.compileShader(r),i.callback||function(t,e,n,i){i=i||bt;const r=t.getShaderParameter(n,35713);if(!r){const r=t.getShaderInfoLog(n),{lineOffset:s,shaderSource:o}=jt(t.getShaderSource(n));i(`${function(t,e="",n=0){const i=[...e.matchAll(Yt)],r=new Map(i.map(((t,n)=>{const r=parseInt(t[1]),s=i[n+1],o=s?s.index:e.length;return[r-1,e.substring(t.index,o)]})));return t.split("\n").map(((t,e)=>{const i=r.get(e);return`${e+1+n}: ${t}${i?`\n\n^^^ ${i}`:""}`})).join("\n")}(o,r,s)}\nError compiling ${mt(t,e)}: ${r}`)}return r}(t,n,r,i.errorCallback)?r:(t.deleteShader(r),null)}function Wt(t,e,n){let i,r,s;if("function"==typeof e&&(n=e,e=void 0),"function"==typeof t)n=t,t=void 0;else if(t&&!Array.isArray(t)){if(t.errorCallback&&t.errors)return t;const e=t;n=e.errorCallback,t=e.attribLocations,i=e.transformFeedbackVaryings,r=e.transformFeedbackMode,s=e.callback}const o=n||bt,a=[],l={errorCallback(t,...e){a.push(t),o(t,...e)},transformFeedbackVaryings:i,transformFeedbackMode:r,callback:s,errors:a};if(t){let n={};Array.isArray(t)?t.forEach((function(t,i){n[t]=e?e[i]:i})):n=t,l.attribLocations=n}return l}const Qt=["VERTEX_SHADER","FRAGMENT_SHADER"];function qt(t,e){return e.indexOf("frag")>=0?35632:e.indexOf("vert")>=0?35633:void 0}function Jt(t,e){e.forEach((function(e){t.deleteShader(e)}))}const Kt=(t=0)=>new Promise((e=>setTimeout(e,t)));function Zt(t,e,n,i,r){const s=Wt(n,i,r),o=[],a=[];for(let n=0;n<e.length;++n){let i=e[n];if("string"==typeof i){const e=yt(i),r=e?e.text:i;let o=t[Qt[n]];e&&e.type&&(o=qt(0,e.type)||o),i=Xt(t,r,o,s),a.push(i)}l=i,"undefined"!=typeof WebGLShader&&l instanceof WebGLShader&&o.push(i)}var l;if(o.length!==e.length)return Jt(t,a),Nt(s,"not enough shaders for program");const c=t.createProgram();o.forEach((function(e){t.attachShader(c,e)})),s.attribLocations&&Object.keys(s.attribLocations).forEach((function(e){t.bindAttribLocation(c,s.attribLocations[e],e)}));let h=s.transformFeedbackVaryings;return h&&(h.attribs&&(h=h.attribs),Array.isArray(h)||(h=Object.keys(h)),t.transformFeedbackVaryings(c,h,s.transformFeedbackMode||35981)),t.linkProgram(c),s.callback?(async function(t,e,n){const i=t.getExtension("KHR_parallel_shader_compile"),r=i?(t,e)=>t.getProgramParameter(e,i.COMPLETION_STATUS_KHR):()=>!0;let s=0;do{await Kt(s),s=1e3/60}while(!r(t,e));const o=te(t,e,n.errorCallback),a=o?void 0:n.errors.join("\n");if(!o){(n.errorCallback||bt)(a),t.deleteProgram(e),e=null}n.callback(a,e)}(t,c,s),null):te(t,c,s.errorCallback)?c:(t.deleteProgram(c),Jt(t,a),null)}function te(t,e,n){n=n||bt;const i=t.getProgramParameter(e,35714);if(!i){n(`Error in program linking: ${t.getProgramInfoLog(e)}`)}return i}function ee(t,e,n,i,r){const s=Wt(n,i,r),o=[];for(let n=0;n<e.length;++n){const i=Xt(t,e[n],t[Qt[n]],s);if(!s.callback&&!i)return null;o.push(i)}return Zt(t,o,s)}function ne(t){const e=t.name;return e.startsWith("gl_")||e.startsWith("webgl_")}const ie=/(\.|\[|]|\w+)/g;function re(t,e,n,i){const r=t.split(ie).filter((t=>""!==t));let s=0,o="";for(;;){const t=r[s++];o+=t;const l=(a=t[0])>="0"&&a<="9",c=l?parseInt(t):t;l&&(o+=r[s++]);if(s===r.length){n[c]=e;break}{const t=r[s++],e="["===t,a=n[c]||(e?[]:{});n[c]=a,n=a,i[o]=i[o]||function(t){return function(e){le(t,e)}}(a),o+=t}}var a}function se(t,e){let n=0;function i(e,i,r){const s=i.name.endsWith("[0]"),o=i.type,a=Ft[o];if(!a)throw new Error(`unknown type: 0x${o.toString(16)}`);let l;if(a.bindPoint){const e=n;n+=i.size,l=s?a.arraySetter(t,o,e,r,i.size):a.setter(t,o,e,r,i.size)}else l=a.arraySetter&&s?a.arraySetter(t,r):a.setter(t,r);return l.location=r,l}const r={},s={},o=t.getProgramParameter(e,35718);for(let n=0;n<o;++n){const o=t.getActiveUniform(e,n);if(ne(o))continue;let a=o.name;a.endsWith("[0]")&&(a=a.substr(0,a.length-3));const l=t.getUniformLocation(e,o.name);if(l){const t=i(0,o,l);r[a]=t,re(a,t,s,r)}}return r}function oe(t,e){const n={},i=t.getProgramParameter(e,35971);for(let r=0;r<i;++r){const i=t.getTransformFeedbackVarying(e,r);n[i.name]={index:r,type:i.type,size:i.size}}return n}function ae(t,e){const n=t.getProgramParameter(e,35718),i=[],r=[];for(let s=0;s<n;++s){r.push(s),i.push({});const n=t.getActiveUniform(e,s);i[s].name=n.name}[["UNIFORM_TYPE","type"],["UNIFORM_SIZE","size"],["UNIFORM_BLOCK_INDEX","blockNdx"],["UNIFORM_OFFSET","offset"]].forEach((function(n){const s=n[0],o=n[1];t.getActiveUniforms(e,r,t[s]).forEach((function(t,e){i[e][o]=t}))}));const s={},o=t.getProgramParameter(e,35382);for(let n=0;n<o;++n){const i=t.getActiveUniformBlockName(e,n),r={index:t.getUniformBlockIndex(e,i),usedByVertexShader:t.getActiveUniformBlockParameter(e,n,35396),usedByFragmentShader:t.getActiveUniformBlockParameter(e,n,35398),size:t.getActiveUniformBlockParameter(e,n,35392),uniformIndices:t.getActiveUniformBlockParameter(e,n,35395)};r.used=r.usedByVertexShader||r.usedByFragmentShader,s[i]=r}return{blockSpecs:s,uniformData:i}}function le(t,e){for(const n in e){const i=t[n];"function"==typeof i?i(e[n]):le(t[n],e[n])}}function ce(t,...e){const n=t.uniformSetters||t,i=e.length;for(let t=0;t<i;++t){const i=e[t];if(Array.isArray(i)){const t=i.length;for(let e=0;e<t;++e)ce(n,i[e])}else for(const t in i){const e=n[t];e&&e(i[t])}}}function he(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;++r){const i=t.getActiveAttrib(e,r);if(ne(i))continue;const s=t.getAttribLocation(e,i.name),o=Ht[i.type],a=o.setter(t,s,o);a.location=s,n[i.name]=a}return n}function ue(t,e){for(const n in e){const i=t[n];i&&i(e[n])}}function de(t,e,n){n.vertexArrayObject?t.bindVertexArray(n.vertexArrayObject):(ue(e.attribSetters||e,n.attribs),n.indices&&t.bindBuffer(34963,n.indices))}function fe(t,e){const n={program:e,uniformSetters:se(t,e),attribSetters:he(t,e)};return pt(t)&&(n.uniformBlockSpec=ae(t,e),n.transformFeedbackInfo=oe(t,e)),n}const ge=/\s|{|}|;/;function pe(t,e,n,i,r){const s=Wt(n,i,r),o=[];if(e=e.map((function(t){if(!ge.test(t)){const e=yt(t);if(e)t=e.text;else{const e=`no element with id: ${t}`;s.errorCallback(e),o.push(e)}}return t})),o.length)return Nt(s,"");const a=s.callback;a&&(s.callback=(e,n)=>{let i;e||(i=fe(t,n)),a(e,i)});const l=ee(t,e,s);return l?fe(t,l):null}function me(t,e,n,i,r,s){n=void 0===n?4:n;const o=e.indices,a=e.elementType,l=void 0===i?e.numElements:i;r=void 0===r?0:r,a||o?void 0!==s?t.drawElementsInstanced(n,l,void 0===a?5123:e.elementType,r,s):t.drawElements(n,l,void 0===a?5123:e.elementType,r):void 0!==s?t.drawArraysInstanced(n,r,l,s):t.drawArrays(n,r,l)}const ve=36096,be=33306,ye={};ye[34041]=be,ye[6401]=36128,ye[36168]=36128,ye[6402]=ve,ye[33189]=ve,ye[33190]=ve,ye[36012]=ve,ye[35056]=be,ye[36013]=be;const Ae={};Ae[32854]=!0,Ae[32855]=!0,Ae[36194]=!0,Ae[34041]=!0,Ae[33189]=!0,Ae[6401]=!0,Ae[36168]=!0;function we(t,e){e=e||1,e=Math.max(0,e);const n=t.clientWidth*e|0,i=t.clientHeight*e|0;return(t.width!==n||t.height!==i)&&(t.width=n,t.height=i,!0)}class xe{constructor(t){this.gl=t,this.y=0,this.isActive=this.canScroll,document.onscroll=t=>this.onScroll(t)}onScroll(t){this.isActive&&(this.y=window.scrollY*this.gl.vp.px)}resize(t){this.gl=t,this.isActive=this.canScroll,this.y=window.scrollY*this.gl.vp.px}get canScroll(){return document.documentElement.scrollHeight>window.innerHeight}}class _e{constructor(t,e={z:-9,fov:.6,near:1,far:1024}){e.fov=35*Math.PI/180,this.camera=e}get(t){return this.camera.mat=v.translate(v.perspective(this.camera.fov,t.canvas.width/t.canvas.height,this.camera.near,this.camera.far),[0,0,this.camera.z]),this.camera}}
/**
 * lil-gui
 * https://lil-gui.georgealways.com
 * @version 0.17.0
 * @author George Michael Brower
 * @license MIT
 */
class Ee{constructor(t,e,n,i,r="div"){this.parent=t,this.object=e,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("name"),Ee.nextNameID=Ee.nextNameID||0,this.$name.id="lil-gui-name-"+ ++Ee.nextNameID,this.$widget=document.createElement(r),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(t){return this._name=t,this.$name.innerHTML=t,this}onChange(t){return this._onChange=t,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(t=!0){return this.disable(!t)}disable(t=!0){return t===this._disabled||(this._disabled=t,this.domElement.classList.toggle("disabled",t),this.$disable.toggleAttribute("disabled",t)),this}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(t){const e=this.parent.add(this.object,this.property,t);return e.name(this._name),this.destroy(),e}min(t){return this}max(t){return this}step(t){return this}decimals(t){return this}listen(t=!0){return this._listening=t,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const t=this.save();t!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=t}getValue(){return this.object[this.property]}setValue(t){return this.object[this.property]=t,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(t){return this.setValue(t),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class ze extends Ee{constructor(t,e,n){super(t,e,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",(()=>{this.setValue(this.$input.checked),this._callOnFinishChange()})),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function Ce(t){let e,n;return(e=t.match(/(#|0x)?([a-f0-9]{6})/i))?n=e[2]:(e=t.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(e[1]).toString(16).padStart(2,0)+parseInt(e[2]).toString(16).padStart(2,0)+parseInt(e[3]).toString(16).padStart(2,0):(e=t.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),!!n&&"#"+n}const Se={isPrimitive:!0,match:t=>"string"==typeof t,fromHexString:Ce,toHexString:Ce},$e={isPrimitive:!0,match:t=>"number"==typeof t,fromHexString:t=>parseInt(t.substring(1),16),toHexString:t=>"#"+t.toString(16).padStart(6,0)},Fe={isPrimitive:!1,match:Array.isArray,fromHexString(t,e,n=1){const i=$e.fromHexString(t);e[0]=(i>>16&255)/255*n,e[1]=(i>>8&255)/255*n,e[2]=(255&i)/255*n},toHexString:([t,e,n],i=1)=>$e.toHexString(t*(i=255/i)<<16^e*i<<8^n*i<<0)},Pe={isPrimitive:!1,match:t=>Object(t)===t,fromHexString(t,e,n=1){const i=$e.fromHexString(t);e.r=(i>>16&255)/255*n,e.g=(i>>8&255)/255*n,e.b=(255&i)/255*n},toHexString:({r:t,g:e,b:n},i=1)=>$e.toHexString(t*(i=255/i)<<16^e*i<<8^n*i<<0)},Te=[Se,$e,Fe,Pe];class ke extends Ee{constructor(t,e,n,i){var r;super(t,e,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(r=this.initialValue,Te.find((t=>t.match(r)))),this._rgbScale=i,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",(()=>{this._setValueFromHexString(this.$input.value)})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$text.addEventListener("input",(()=>{const t=Ce(this.$text.value);t&&this._setValueFromHexString(t)})),this.$text.addEventListener("focus",(()=>{this._textFocused=!0,this.$text.select()})),this.$text.addEventListener("blur",(()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()})),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(t){if(this._format.isPrimitive){const e=this._format.fromHexString(t);this.setValue(e)}else this._format.fromHexString(t,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(t){return this._setValueFromHexString(t),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class Ie extends Ee{constructor(t,e,n){super(t,e,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",(t=>{t.preventDefault(),this.getValue().call(this.object)})),this.$button.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$disable=this.$button}}class Me extends Ee{constructor(t,e,n,i,r,s){super(t,e,n,"number"),this._initInput(),this.min(i),this.max(r);const o=void 0!==s;this.step(o?s:this._getImplicitStep(),o),this.updateDisplay()}decimals(t){return this._decimals=t,this.updateDisplay(),this}min(t){return this._min=t,this._onUpdateMinMax(),this}max(t){return this._max=t,this._onUpdateMinMax(),this}step(t,e=!0){return this._step=t,this._stepExplicit=e,this}updateDisplay(){const t=this.getValue();if(this._hasSlider){let e=(t-this._min)/(this._max-this._min);e=Math.max(0,Math.min(e,1)),this.$fill.style.width=100*e+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?t:t.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const t=t=>{const e=parseFloat(this.$input.value);isNaN(e)||(this._snapClampSetValue(e+t),this.$input.value=this.getValue())};let e,n,i,r,s,o=!1;const a=t=>{if(o){const i=t.clientX-e,r=t.clientY-n;Math.abs(r)>5?(t.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(i)>5&&l()}if(!o){const e=t.clientY-i;s-=e*this._step*this._arrowKeyMultiplier(t),r+s>this._max?s=this._max-r:r+s<this._min&&(s=this._min-r),this._snapClampSetValue(r+s)}i=t.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",(()=>{let t=parseFloat(this.$input.value);isNaN(t)||(this._stepExplicit&&(t=this._snap(t)),this.setValue(this._clamp(t)))})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.code&&this.$input.blur(),"ArrowUp"===e.code&&(e.preventDefault(),t(this._step*this._arrowKeyMultiplier(e))),"ArrowDown"===e.code&&(e.preventDefault(),t(this._step*this._arrowKeyMultiplier(e)*-1))})),this.$input.addEventListener("wheel",(e=>{this._inputFocused&&(e.preventDefault(),t(this._step*this._normalizeMouseWheel(e)))}),{passive:!1}),this.$input.addEventListener("mousedown",(t=>{e=t.clientX,n=i=t.clientY,o=!0,r=this.getValue(),s=0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",l)})),this.$input.addEventListener("focus",(()=>{this._inputFocused=!0})),this.$input.addEventListener("blur",(()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()}))}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const t=t=>{const e=this.$slider.getBoundingClientRect();let n=(i=t,r=e.left,s=e.right,o=this._min,a=this._max,(i-r)/(s-r)*(a-o)+o);var i,r,s,o,a;this._snapClampSetValue(n)},e=e=>{t(e.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n)};let i,r,s=!1;const o=e=>{e.preventDefault(),this._setDraggingStyle(!0),t(e.touches[0].clientX),s=!1},a=e=>{if(s){const t=e.touches[0].clientX-i,n=e.touches[0].clientY-r;Math.abs(t)>Math.abs(n)?o(e):(window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l))}else e.preventDefault(),t(e.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",l)},c=this._callOnFinishChange.bind(this);let h;this.$slider.addEventListener("mousedown",(i=>{this._setDraggingStyle(!0),t(i.clientX),window.addEventListener("mousemove",e),window.addEventListener("mouseup",n)})),this.$slider.addEventListener("touchstart",(t=>{t.touches.length>1||(this._hasScrollBar?(i=t.touches[0].clientX,r=t.touches[0].clientY,s=!0):o(t),window.addEventListener("touchmove",a,{passive:!1}),window.addEventListener("touchend",l))}),{passive:!1}),this.$slider.addEventListener("wheel",(t=>{if(Math.abs(t.deltaX)<Math.abs(t.deltaY)&&this._hasScrollBar)return;t.preventDefault();const e=this._normalizeMouseWheel(t)*this._step;this._snapClampSetValue(this.getValue()+e),this.$input.value=this.getValue(),clearTimeout(h),h=setTimeout(c,400)}),{passive:!1})}_setDraggingStyle(t,e="horizontal"){this.$slider&&this.$slider.classList.toggle("active",t),document.body.classList.toggle("lil-gui-dragging",t),document.body.classList.toggle(`lil-gui-${e}`,t)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(t){let{deltaX:e,deltaY:n}=t;Math.floor(t.deltaY)!==t.deltaY&&t.wheelDelta&&(e=0,n=-t.wheelDelta/120,n*=this._stepExplicit?1:10);return e+-n}_arrowKeyMultiplier(t){let e=this._stepExplicit?1:10;return t.shiftKey?e*=10:t.altKey&&(e/=10),e}_snap(t){const e=Math.round(t/this._step)*this._step;return parseFloat(e.toPrecision(15))}_clamp(t){return t<this._min&&(t=this._min),t>this._max&&(t=this._max),t}_snapClampSetValue(t){this.setValue(this._clamp(this._snap(t)))}get _hasScrollBar(){const t=this.parent.root.$children;return t.scrollHeight>t.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class Le extends Ee{constructor(t,e,n,i){super(t,e,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(i)?i:Object.values(i),this._names=Array.isArray(i)?i:Object.keys(i),this._names.forEach((t=>{const e=document.createElement("option");e.innerHTML=t,this.$select.appendChild(e)})),this.$select.addEventListener("change",(()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()})),this.$select.addEventListener("focus",(()=>{this.$display.classList.add("focus")})),this.$select.addEventListener("blur",(()=>{this.$display.classList.remove("focus")})),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const t=this.getValue(),e=this._values.indexOf(t);return this.$select.selectedIndex=e,this.$display.innerHTML=-1===e?t:this._names[e],this}}class Be extends Ee{constructor(t,e,n){super(t,e,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",(()=>{this.setValue(this.$input.value)})),this.$input.addEventListener("keydown",(t=>{"Enter"===t.code&&this.$input.blur()})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let Ue=!1;class Re{constructor({parent:t,autoPlace:e=void 0===t,container:n,width:i,title:r="Controls",injectStyles:s=!0,touchStyles:o=!0}={}){if(this.parent=t,this.root=t?t.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",(()=>this.openAnimated(this._closed))),this.$title.addEventListener("keydown",(t=>{"Enter"!==t.code&&"Space"!==t.code||(t.preventDefault(),this.$title.click())})),this.$title.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(r),o&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!Ue&&s&&(!function(t){const e=document.createElement("style");e.innerHTML=t;const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(e,n):document.head.appendChild(e)}('.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "↕";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "▾";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "▸";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "✓";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}'),Ue=!0),n?n.appendChild(this.domElement):e&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),i&&this.domElement.style.setProperty("--width",i+"px"),this.domElement.addEventListener("keydown",(t=>t.stopPropagation())),this.domElement.addEventListener("keyup",(t=>t.stopPropagation()))}add(t,e,n,i,r){if(Object(n)===n)return new Le(this,t,e,n);const s=t[e];switch(typeof s){case"number":return new Me(this,t,e,n,i,r);case"boolean":return new ze(this,t,e);case"string":return new Be(this,t,e);case"function":return new Ie(this,t,e)}console.error("gui.add failed\n\tproperty:",e,"\n\tobject:",t,"\n\tvalue:",s)}addColor(t,e,n=1){return new ke(this,t,e,n)}addFolder(t){return new Re({parent:this,title:t})}load(t,e=!0){return t.controllers&&this.controllers.forEach((e=>{e instanceof Ie||e._name in t.controllers&&e.load(t.controllers[e._name])})),e&&t.folders&&this.folders.forEach((e=>{e._title in t.folders&&e.load(t.folders[e._title])})),this}save(t=!0){const e={controllers:{},folders:{}};return this.controllers.forEach((t=>{if(!(t instanceof Ie)){if(t._name in e.controllers)throw new Error(`Cannot save GUI with duplicate property "${t._name}"`);e.controllers[t._name]=t.save()}})),t&&this.folders.forEach((t=>{if(t._title in e.folders)throw new Error(`Cannot save GUI with duplicate folder "${t._title}"`);e.folders[t._title]=t.save()})),e}open(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(t=!0){return this._hidden=!t,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(t=!0){return this._closed=!t,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame((()=>{const e=this.$children.clientHeight;this.$children.style.height=e+"px",this.domElement.classList.add("transition");const n=t=>{t.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const i=t?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!t),requestAnimationFrame((()=>{this.$children.style.height=i+"px"}))})),this}title(t){return this._title=t,this.$title.innerHTML=t,this}reset(t=!0){return(t?this.controllersRecursive():this.controllers).forEach((t=>t.reset())),this}onChange(t){return this._onChange=t,this}_callOnChange(t){this.parent&&this.parent._callOnChange(t),void 0!==this._onChange&&this._onChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}onFinishChange(t){return this._onFinishChange=t,this}_callOnFinishChange(t){this.parent&&this.parent._callOnFinishChange(t),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:t.object,property:t.property,value:t.getValue(),controller:t})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach((t=>t.destroy()))}controllersRecursive(){let t=Array.from(this.controllers);return this.folders.forEach((e=>{t=t.concat(e.controllersRecursive())})),t}foldersRecursive(){let t=Array.from(this.folders);return this.folders.forEach((e=>{t=t.concat(e.foldersRecursive())})),t}}var De=Re;var Oe=[t("#define GLSLIFY 1\nattribute vec4 position;\n\nvarying vec2 v_xy;\n\nvoid main() {\n  gl_Position = position;\n  v_xy = position.xy;\n}\n  "),t("precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_res;\nuniform float u_time;\nuniform vec2 u_mouse;\nvarying vec2 v_xy;\n\nuniform vec4 u_params;\nuniform vec4 u_params2;\nuniform vec3 u_color;\n\nconst float MPI = 6.28318530718;\n\n// cos mix\nvec3 palette( in float t, in vec3 a, in vec3 b, in vec3 c, in vec3 d ){\n    return a + b * cos( 6.28318 * ( c * t + d));\n}\n\n// hue shift\nvec3 hueShift( vec3 color, float hueAdjust ){\n\n    const vec3  kRGBToYPrime = vec3 (0.299, 0.587, 0.114);\n    const vec3  kRGBToI      = vec3 (0.596, -0.275, -0.321);\n    const vec3  kRGBToQ      = vec3 (0.212, -0.523, 0.311);\n\n    const vec3  kYIQToR     = vec3 (1.0, 0.956, 0.621);\n    const vec3  kYIQToG     = vec3 (1.0, -0.272, -0.647);\n    const vec3  kYIQToB     = vec3 (1.0, -1.107, 1.704);\n\n    float   YPrime  = dot (color, kRGBToYPrime);\n    float   I       = dot (color, kRGBToI);\n    float   Q       = dot (color, kRGBToQ);\n    float   hue     = atan (Q, I);\n    float   chroma  = sqrt (I * I + Q * Q);\n\n    hue += hueAdjust;\n\n    Q = chroma * sin (hue);\n    I = chroma * cos (hue);\n\n    vec3    yIQ   = vec3 (YPrime, I, Q);\n\n    return vec3( dot (yIQ, kYIQToR), dot (yIQ, kYIQToG), dot (yIQ, kYIQToB) );\n\n}\n\n// noise\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\nvec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}\n\nfloat cnoise(vec3 P){\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod(Pi0, 289.0);\n  Pi1 = mod(Pi1, 289.0);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 / 7.0;\n  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 / 7.0;\n  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n// colors\nconst vec3 col1 = vec3(0.5, 0.5, 0.5);\nconst vec3 col2 = vec3(0.5, 0.5, 0.5);\nconst vec3 col3 = vec3(1.0, 1.0, 1.0);\n\t\t\t\t\n\nvoid main() {\n  // params\n float MULT_X = u_params.x;\n float MULT_Y = u_params.y;\n float HUE = u_params.z; // 0 / 360\n float BRIGHTNESS = u_params.w;\n float MOUSE_BRIGHTNESS = u_params2.x; // -1 / 1 -- -1 being black and 100% power\n float SCALE = u_params2.y;\n float NOISE_FACTOR = u_params2.z;\n float BW = u_params2.w;\n\n  // shader\n  vec2 uv = gl_FragCoord.xy / u_res;\n  vec2 scale_uv = uv;\n  scale_uv -= vec2(.5);\n  scale_uv *= SCALE;\n  \n  // noise\n  float noise = cnoise(vec3(scale_uv, u_time)) * NOISE_FACTOR;\n  \n  // mouse\n  float c_d = distance(scale_uv.x, .5);\n  c_d = smoothstep(0., .6, c_d);\n  vec2 m_uv = scale_uv * (c_d + cos(scale_uv.x * MULT_X) * noise - sin(scale_uv.y * MULT_Y) * noise);\n\n  // end uv deformation\n  scale_uv += vec2(.5);\n\n  // # COMPUTE\n  vec3 col = palette(\n    u_time + cos((m_uv.x) + (m_uv.y)), \n    col1, col2, col2, u_color\n  );\n\n  // mouse \n  float dist = distance(m_uv, u_mouse * SCALE/2.);\n  \n  dist = 1. - dist;\n  dist = smoothstep(.3, 1., dist);\n\n  vec3 shift_col = hueShift(col, sin(u_time * MPI));\n\n  col = mix(\n    col, \n    shift_col * col + (dist * MOUSE_BRIGHTNESS), \n    dist\n  );\n\n \n  // final shift\n  col = hueShift(col, HUE);\n  col *= BRIGHTNESS;\n\n  float bw_col = (col.r + col.g + col.b) * .3;\n  col = mix(col, vec3(bw_col), BW);\n  \n\n  gl_FragColor.rgb = col;\n  gl_FragColor.a = 1.;\n}\n  ")];class Ve{constructor(t,e={}){this.gl=t,this.data=e,this.shaders=Oe,this.programInfo=pe(this.gl,this.shaders),console.log(this.data),this.data.test&&this.initGui(),this.gl.useProgram(this.programInfo.program),this.setBuffAtt(),this.setUniforms()}setBuffAtt(){this.bufferInfo=G(this.gl,{position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]})}setUniforms(){this.uniforms={u_res:[this.gl.canvas.width,this.gl.canvas.height],u_time:0,u_params:[this.data.multx,this.data.multy,this.data.hue,this.data.brightness],u_params2:[this.data.mouse,this.data.scale,this.data.noise,this.data.bw],u_color:this.data.color},this.gl.useProgram(this.programInfo.program),ce(this.programInfo,this.uniforms)}render(t,{x:e,y:n}){this.gl.useProgram(this.programInfo.program),de(this.gl,this.programInfo,this.bufferInfo),ce(this.programInfo,{u_time:t*this.data.time,u_mouse:[e,n]}),me(this.gl,this.bufferInfo)}resize(t){this.gl=t,this.gl.useProgram(this.programInfo.program),ce(this.programInfo,{u_res:[this.gl.canvas.width,this.gl.canvas.height]})}initGui(){this.gui=new De,this.gui.add(this.data,"multx",0,10).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"multy",0,10).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"hue",0,1).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"brightness",0,5).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"mouse",-1,1).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"scale",0,10).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"noise",0,10).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"bw",0,1).onChange((()=>{this.setUniforms()})).listen(),this.gui.add(this.data,"time",0,1)}}class He{constructor(t){this.gl=t,this.computeParams(),this.events(),this.create()}events(){this.mouse={x:0,y:0,wx:window.innerWidth,wy:window.innerHeight},document.addEventListener("mousemove",(t=>{this.mouse.x=t.clientX/this.mouse.wx*2-1,this.mouse.y=-t.clientY/this.mouse.wy*2+1}))}create(){this.quad=new Ve(this.gl,this.params)}render(t,e){this.quad&&this.quad.render(t,this.mouse)}resize(t){this.gl=t,this.mouse.wx=window.innerWidth,this.mouse.wy=window.innerHeight,this.quad&&this.quad.resize(this.gl)}computeParams(){const t=document.querySelector('[data-gradient="wrapper"]'),e=[parseFloat(t.dataset.red)||0,parseFloat(t.dataset.green)||.33,parseFloat(t.dataset.blue)||.66];this.params={test:t.hasAttribute("data-test"),multx:parseFloat(t.dataset.multx)||.2,multy:parseFloat(t.dataset.multy)||.8,hue:parseFloat(t.dataset.hue)||0,brightness:parseFloat(t.dataset.brightness)||.8,mouse:parseFloat(t.dataset.mouse)||1,scale:parseFloat(t.dataset.scale)||.2,noise:parseFloat(t.dataset.noise)||1,color:e,bw:parseFloat(t.dataset.bw)||0,time:parseFloat(t.dataset.time)||1}}}var Ye=[t("#define GLSLIFY 1\nattribute vec4 position;\n\nvoid main() {\n  vec4 pos = position;\n  gl_Position = position;\n}\n  "),t("precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 u_res;\nuniform float u_time;\n\nuniform sampler2D u_diff;\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / u_res;\n\n  vec3 img = texture2D(u_diff, uv).rgb;\n\n  //img.rg += uv * .1;\n\n  gl_FragColor.rgb = img.rgb;\n  gl_FragColor.a = 1.;\n}\n  ")];class Ge{constructor(t,e={}){this.gl=t,this.data=e,this.shaders=Ye,this.programInfo=pe(this.gl,this.shaders),this.gl.useProgram(this.programInfo.program),this.setBuffAtt(),this.setUniforms()}setBuffAtt(){this.bufferInfo=G(this.gl,{position:[-1,-1,0,1,-1,0,-1,1,0,-1,1,0,1,-1,0,1,1,0]})}setUniforms(){this.uniforms={u_res:[this.gl.canvas.width,this.gl.canvas.height],u_time:0},this.gl.useProgram(this.programInfo.program),ce(this.programInfo,this.uniforms)}render(t,e=null){this.gl.useProgram(this.programInfo.program),de(this.gl,this.programInfo,this.bufferInfo),ce(this.programInfo,{u_time:t,u_diff:e}),me(this.gl,this.bufferInfo)}resize(t){this.gl=t,this.gl.useProgram(this.programInfo.program),ce(this.programInfo,{u_res:[this.gl.canvas.width,this.gl.canvas.height]})}}class je{constructor(t){this.gl=t}create(){this.fbi=this.gl.createFramebuffer(),this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.canvas.width,this.gl.canvas.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.depthBuffer=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depthBuffer),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.gl.canvas.width,this.gl.canvas.height),this.attach(),this.createPlane(),this.unbind()}attach(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbi),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depthBuffer)}unbind(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,null)}createPlane(){this.quad=new Ge(this.gl)}setupRender(){this.isActive&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbi),this.gl.clear(this.gl.COLOR_BUFFER_BIT||this.gl.DEPTH_BUFFER_BIT))}render(t){this.isActive&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.quad&&this.quad.render(t,this.texture))}resize(t){this.gl=t,this.create(),this.quad&&this.quad.resize(this.gl)}}class Ne{constructor(){this.canvas=document.getElementById("c"),this.gl=this.canvas.getContext("webgl"),this.gl.clearColor(.04,.04,.04,1),this.gl.vp={dpr:Math.min(window.devicePixelRatio,2)},this.camera=new _e(this.gl),this.gl.camera=this.camera.get(this.gl),new ResizeObserver((t=>this.resize(t[0].contentRect))).observe(this.canvas),this.resize(),this.scroll=new xe(this.gl),this.time=0,this.create(),this.render(),this.resize()}create(){this.post=new je(this.gl),this.post.isActive=!1,this.scene=new He(this.gl)}render(){this.time+=.01,this.gl.clear(this.gl.COLOR_BUFFER_BIT||this.gl.DEPTH_BUFFER_BIT),this.gl.viewport(0,0,this.gl.canvas.width,this.gl.canvas.height),this.post&&this.post.isActive&&this.post.setupRender(),this.scene&&this.scene.render(this.time,this.scroll.y),this.post&&this.post.isActive&&this.post.render(this.time),requestAnimationFrame(this.render.bind(this))}resize(){we(this.gl.canvas,this.gl.vp.dpr),this.gl.vp={viewSize:this.viewSize,px:this.pixelSize,inner:[window.innerWidth,window.innerHeight],scroll:window.scrollY},this.gl.camera&&(this.gl.camera=this.camera.get(this.gl)),this.scroll&&this.scroll.resize(this.gl),this.post&&this.post.resize(this.gl),this.scene&&this.scene.resize(this.gl)}get viewSize(){const t=Math.abs(this.gl.camera.z*Math.tan(this.gl.camera.fov/2)*2);return[t*(this.gl.canvas.width/this.gl.canvas.height),t]}get pixelSize(){return this.viewSize[0]/window.innerWidth}}new class{constructor(){this.gl=new Ne("c")}}})();
//# sourceMappingURL=app.js.map
